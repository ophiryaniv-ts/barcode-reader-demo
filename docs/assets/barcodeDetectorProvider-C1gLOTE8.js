var i=Object.defineProperty;var n=(c,e,r)=>e in c?i(c,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):c[e]=r;var d=(c,e,r)=>n(c,typeof e!="symbol"?e+"":e,r);import{l as o}from"./index-CalD67Mk.js";class u{constructor(){d(this,"name","BarcodeDetector");d(this,"detector",null)}async init(){if(o.info("BarcodeDetectorProvider","Initializing BarcodeDetector provider"),!("BarcodeDetector"in window))throw new Error("BarcodeDetector API not supported in this browser");try{this.detector=new window.BarcodeDetector({formats:["qr_code","pdf417","code_128","code_39","ean_13","ean_8"]}),o.debug("BarcodeDetectorProvider","Native BarcodeDetector created")}catch(e){throw o.error("BarcodeDetectorProvider","Failed to initialize BarcodeDetector",e),e}}async scanVideoFrame(e,r){if(!this.detector)throw new Error("BarcodeDetector provider not initialized");if(!e.videoWidth||!e.videoHeight)return null;try{const t=await this.detector.detect(e);return t.length>0?(o.debug("BarcodeDetectorProvider",`Found ${t.length} barcode(s)`,{formats:t.map(a=>a.format)}),t[0].rawValue):null}catch(t){return o.debug("BarcodeDetectorProvider","No barcode found in video frame",t),null}}async scanImage(e){if(!this.detector)throw new Error("BarcodeDetector provider not initialized");try{const r=await this.detector.detect(e);return r.length>0?(o.debug("BarcodeDetectorProvider",`Found ${r.length} barcode(s)`,{formats:r.map(t=>t.format)}),r[0].rawValue):null}catch(r){return o.debug("BarcodeDetectorProvider","No barcode found in image",r),null}}destroy(){o.debug("BarcodeDetectorProvider","Destroying BarcodeDetector provider"),this.detector=null}}export{u as BarcodeDetectorProvider};
