var wa=Object.defineProperty;var ba=(d,h,u)=>h in d?wa(d,h,{enumerable:!0,configurable:!0,writable:!0,value:u}):d[h]=u;var Gt=(d,h,u)=>ba(d,typeof h!="symbol"?h+"":h,u);import{l as At}from"./index-JZAwjNll.js";const St=[["Aztec","M"],["Codabar","L"],["Code39","L"],["Code93","L"],["Code128","L"],["DataBar","L"],["DataBarExpanded","L"],["DataMatrix","M"],["EAN-8","L"],["EAN-13","L"],["ITF","L"],["MaxiCode","M"],["PDF417","M"],["QRCode","M"],["UPC-A","L"],["UPC-E","L"],["MicroQRCode","M"],["rMQRCode","M"],["DXFilmEdge","L"],["DataBarLimited","L"]],Ot=St.map(([d])=>d),Ca=Ot.filter((d,h)=>St[h][1]==="L"),Ta=Ot.filter((d,h)=>St[h][1]==="M");function Zt(d){switch(d){case"Linear-Codes":return Ca.reduce((h,u)=>h|Zt(u),0);case"Matrix-Codes":return Ta.reduce((h,u)=>h|Zt(u),0);case"Any":return(1<<St.length)-1;case"None":return 0;default:return 1<<Ot.indexOf(d)}}function Pa(d){if(d===0)return"None";const h=31-Math.clz32(d);return Ot[h]}function Aa(d){return d.reduce((h,u)=>h|Zt(u),0)}const _a=["LocalAverage","GlobalHistogram","FixedThreshold","BoolCast"];function Sa(d){return _a.indexOf(d)}const Or=["Unknown","ASCII","ISO8859_1","ISO8859_2","ISO8859_3","ISO8859_4","ISO8859_5","ISO8859_6","ISO8859_7","ISO8859_8","ISO8859_9","ISO8859_10","ISO8859_11","ISO8859_13","ISO8859_14","ISO8859_15","ISO8859_16","Cp437","Cp1250","Cp1251","Cp1252","Cp1256","Shift_JIS","Big5","GB2312","GB18030","EUC_JP","EUC_KR","UTF16BE","UTF16BE","UTF8","UTF16LE","UTF32BE","UTF32LE","BINARY"];function Oa(d){return d==="UnicodeBig"?Or.indexOf("UTF16BE"):Or.indexOf(d)}const xa=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function Ea(d){return xa[d]}const Fa=["Ignore","Read","Require"];function Ia(d){return Fa.indexOf(d)}const Wa=["Plain","ECI","HRI","Hex","Escaped"];function ja(d){return Wa.indexOf(d)}const _t={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,tryDenoise:!1,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!0,returnErrors:!1,eanAddOnSymbol:"Ignore",textMode:"HRI",characterSet:"Unknown"};function xr(d){return{...d,formats:Aa(d.formats),binarizer:Sa(d.binarizer),eanAddOnSymbol:Ia(d.eanAddOnSymbol),textMode:ja(d.textMode),characterSet:Oa(d.characterSet)}}function Ra(d){return{...d,format:Pa(d.format),contentType:Ea(d.contentType),eccLevel:d.ecLevel}}const Da={locateFile:(d,h)=>{const u=d.match(/_(.+?)\.wasm$/);return u?`https://fastly.jsdelivr.net/npm/zxing-wasm@2.1.2/dist/${u[1]}/${d}`:h+d}},Xt=new WeakMap;function Ma(d,h){return Object.is(d,h)||Object.keys(d).length===Object.keys(h).length&&Object.keys(d).every(u=>Object.prototype.hasOwnProperty.call(h,u)&&d[u]===h[u])}function La(d,{overrides:h,equalityFn:u=Ma,fireImmediately:j=!1}={}){var O;const[E,F]=(O=Xt.get(d))!=null?O:[Da],k=h??E;let _;if(j){if(F&&(_=u(E,k)))return F;const R=d({...k});return Xt.set(d,[k,R]),R}(_??u(E,k))||Xt.set(d,[k])}async function Ua(d,h,u=_t){const j={..._t,...u},O=await La(d,{fireImmediately:!0});let E,F;if("width"in h&&"height"in h&&"data"in h){const{data:_,data:{byteLength:R},width:L,height:xt}=h;F=O._malloc(R),O.HEAPU8.set(_,F),E=O.readBarcodesFromPixmap(F,L,xt,xr(j))}else{let _,R;if("buffer"in h)[_,R]=[h.byteLength,h];else if("byteLength"in h)[_,R]=[h.byteLength,new Uint8Array(h)];else if("size"in h)[_,R]=[h.size,new Uint8Array(await h.arrayBuffer())];else throw new TypeError("Invalid input type");F=O._malloc(_),O.HEAPU8.set(R,F),E=O.readBarcodesFromImage(F,_,xr(j))}O._free(F);const k=[];for(let _=0;_<E.size();++_)k.push(Ra(E.get(_)));return k}({..._t,formats:[..._t.formats]});var ka=async function(d={}){var h,u=d,j,O,E=new Promise((r,t)=>{j=r,O=t}),F=typeof window=="object",k=typeof Bun<"u",_=typeof WorkerGlobalScope<"u";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var R="./this.program",L="";function xt(r){return u.locateFile?u.locateFile(r,L):L+r}var qt,Et;(F||_||k)&&(_?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),L.startsWith("blob:")?L="":L=L.slice(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1),_&&(Et=r=>{var t=new XMLHttpRequest;return t.open("GET",r,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),qt=async r=>{var t=await fetch(r,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw new Error(t.status+" : "+t.url)});var Qt=console.log.bind(console),Y=console.error.bind(console),et,ct,Jt=!1,X,D,nt,lt,K,C,Yt,Kt;function tr(){var r=ct.buffer;X=new Int8Array(r),nt=new Int16Array(r),u.HEAPU8=D=new Uint8Array(r),lt=new Uint16Array(r),K=new Int32Array(r),C=new Uint32Array(r),Yt=new Float32Array(r),Kt=new Float64Array(r)}function Fr(){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)Vr(u.preRun.shift());rr(nr)}function Ir(){T.ya()}function Wr(){if(u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;)zr(u.postRun.shift());rr(er)}var Z=0,at=null;function jr(r){var t;Z++,(t=u.monitorRunDependencies)===null||t===void 0||t.call(u,Z)}function Rr(r){var t;if(Z--,(t=u.monitorRunDependencies)===null||t===void 0||t.call(u,Z),Z==0&&at){var e=at;at=null,e()}}function Ft(r){var t;(t=u.onAbort)===null||t===void 0||t.call(u,r),r="Aborted("+r+")",Y(r),Jt=!0,r+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(r);throw O(e),e}var ft;function Dr(){return xt("zxing_reader.wasm")}function Mr(r){if(r==ft&&et)return new Uint8Array(et);if(Et)return Et(r);throw"both async and sync fetching of the wasm failed"}async function Lr(r){if(!et)try{var t=await qt(r);return new Uint8Array(t)}catch{}return Mr(r)}async function Ur(r,t){try{var e=await Lr(r),n=await WebAssembly.instantiate(e,t);return n}catch(a){Y(`failed to asynchronously prepare wasm: ${a}`),Ft(a)}}async function kr(r,t,e){if(!r&&typeof WebAssembly.instantiateStreaming=="function")try{var n=fetch(t,{credentials:"same-origin"}),a=await WebAssembly.instantiateStreaming(n,e);return a}catch(i){Y(`wasm streaming compile failed: ${i}`),Y("falling back to ArrayBuffer instantiation")}return Ur(t,e)}function Br(){return{a:_n}}async function Hr(){function r(i,s){return T=i.exports,ct=T.xa,tr(),dr=T.Ba,Rr(),T}jr();function t(i){return r(i.instance)}var e=Br();if(u.instantiateWasm)return new Promise((i,s)=>{u.instantiateWasm(e,(o,c)=>{i(r(o))})});ft!=null||(ft=Dr());try{var n=await kr(et,ft,e),a=t(n);return a}catch(i){return O(i),Promise.reject(i)}}var rr=r=>{for(;r.length>0;)r.shift()(u)},er=[],zr=r=>er.push(r),nr=[],Vr=r=>nr.push(r),y=r=>En(r),g=()=>Fn(),ht=[],dt=0,Nr=r=>{var t=new It(r);return t.get_caught()||(t.set_caught(!0),dt--),t.set_rethrown(!1),ht.push(t),Wn(r),On(r)},H=0,Gr=()=>{v(0,0);var r=ht.pop();In(r.excPtr),H=0};class It{constructor(t){this.excPtr=t,this.ptr=t-24}set_type(t){C[this.ptr+4>>2]=t}get_type(){return C[this.ptr+4>>2]}set_destructor(t){C[this.ptr+8>>2]=t}get_destructor(){return C[this.ptr+8>>2]}set_caught(t){t=t?1:0,X[this.ptr+12]=t}get_caught(){return X[this.ptr+12]!=0}set_rethrown(t){t=t?1:0,X[this.ptr+13]=t}get_rethrown(){return X[this.ptr+13]!=0}init(t,e){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(e)}set_adjusted_ptr(t){C[this.ptr+16>>2]=t}get_adjusted_ptr(){return C[this.ptr+16>>2]}}var pt=r=>xn(r),Wt=r=>{var t=H;if(!t)return pt(0),0;var e=new It(t);e.set_adjusted_ptr(t);var n=e.get_type();if(!n)return pt(0),t;for(var a of r){if(a===0||a===n)break;var i=e.ptr+16;if(jn(a,n,i))return pt(a),t}return pt(n),t},Xr=()=>Wt([]),Zr=r=>Wt([r]),qr=(r,t)=>Wt([r,t]),Qr=()=>{var r=ht.pop();r||Ft("no exception to throw");var t=r.excPtr;throw r.get_rethrown()||(ht.push(r),r.set_rethrown(!0),r.set_caught(!1),dt++),H=t,H},Jr=(r,t,e)=>{var n=new It(r);throw n.init(t,e),H=r,dt++,H},Yr=()=>dt,Kr=r=>{throw H||(H=r),H},te=()=>Ft(""),vt={},jt=r=>{for(;r.length;){var t=r.pop(),e=r.pop();e(t)}};function it(r){return this.fromWireType(C[r>>2])}var tt={},q={},yt={},re=u.InternalError=class extends Error{constructor(r){super(r),this.name="InternalError"}},gt=r=>{throw new re(r)},Q=(r,t,e)=>{r.forEach(o=>yt[o]=t);function n(o){var c=e(o);c.length!==r.length&&gt("Mismatched type converter count");for(var l=0;l<r.length;++l)B(r[l],c[l])}var a=new Array(t.length),i=[],s=0;t.forEach((o,c)=>{q.hasOwnProperty(o)?a[c]=q[o]:(i.push(o),tt.hasOwnProperty(o)||(tt[o]=[]),tt[o].push(()=>{a[c]=q[o],++s,s===i.length&&n(a)}))}),i.length===0&&n(a)},ee=r=>{var t=vt[r];delete vt[r];var e=t.rawConstructor,n=t.rawDestructor,a=t.fields,i=a.map(s=>s.getterReturnType).concat(a.map(s=>s.setterArgumentType));Q([r],i,s=>{var o={};return a.forEach((c,l)=>{var f=c.fieldName,p=s[l],$=s[l].optional,w=c.getter,P=c.getterContext,S=s[l+a.length],A=c.setter,x=c.setterContext;o[f]={read:G=>p.fromWireType(w(P,G)),write:(G,W)=>{var M=[];A(x,G,S.toWireType(M,W)),jt(M)},optional:$}}),[{name:t.name,fromWireType:c=>{var l={};for(var f in o)l[f]=o[f].read(c);return n(c),l},toWireType:(c,l)=>{for(var f in o)if(!(f in l)&&!o[f].optional)throw new TypeError(`Missing field: "${f}"`);var p=e();for(f in o)o[f].write(p,l[f]);return c!==null&&c.push(n,p),p},argPackAdvance:z,readValueFromPointer:it,destructorFunction:n}]})},ne=(r,t,e,n,a)=>{},ae=()=>{for(var r=new Array(256),t=0;t<256;++t)r[t]=String.fromCharCode(t);ar=r},ar,I=r=>{for(var t="",e=r;D[e];)t+=ar[D[e++]];return t},ot=u.BindingError=class extends Error{constructor(r){super(r),this.name="BindingError"}},b=r=>{throw new ot(r)};function ie(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var n=t.name;if(r||b(`type "${n}" must have a positive integer typeid pointer`),q.hasOwnProperty(r)){if(e.ignoreDuplicateRegistrations)return;b(`Cannot register type '${n}' twice`)}if(q[r]=t,delete yt[r],tt.hasOwnProperty(r)){var a=tt[r];delete tt[r],a.forEach(i=>i())}}function B(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ie(r,t,e)}var z=8,oe=(r,t,e,n)=>{t=I(t),B(r,{name:t,fromWireType:function(a){return!!a},toWireType:function(a,i){return i?e:n},argPackAdvance:z,readValueFromPointer:function(a){return this.fromWireType(D[a])},destructorFunction:null})},se=r=>({count:r.count,deleteScheduled:r.deleteScheduled,preservePointerOnDelete:r.preservePointerOnDelete,ptr:r.ptr,ptrType:r.ptrType,smartPtr:r.smartPtr,smartPtrType:r.smartPtrType}),Rt=r=>{function t(e){return e.$$.ptrType.registeredClass.name}b(t(r)+" instance already deleted")},Dt=!1,ir=r=>{},ue=r=>{r.smartPtr?r.smartPtrType.rawDestructor(r.smartPtr):r.ptrType.registeredClass.rawDestructor(r.ptr)},or=r=>{r.count.value-=1;var t=r.count.value===0;t&&ue(r)},st=r=>typeof FinalizationRegistry>"u"?(st=t=>t,r):(Dt=new FinalizationRegistry(t=>{or(t.$$)}),st=t=>{var e=t.$$,n=!!e.smartPtr;if(n){var a={$$:e};Dt.register(t,a,t)}return t},ir=t=>Dt.unregister(t),st(r)),ce=()=>{let r=mt.prototype;Object.assign(r,{isAliasOf(e){if(!(this instanceof mt)||!(e instanceof mt))return!1;var n=this.$$.ptrType.registeredClass,a=this.$$.ptr;e.$$=e.$$;for(var i=e.$$.ptrType.registeredClass,s=e.$$.ptr;n.baseClass;)a=n.upcast(a),n=n.baseClass;for(;i.baseClass;)s=i.upcast(s),i=i.baseClass;return n===i&&a===s},clone(){if(this.$$.ptr||Rt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=st(Object.create(Object.getPrototypeOf(this),{$$:{value:se(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||Rt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&b("Object already scheduled for deletion"),ir(this),or(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Rt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&b("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const t=Symbol.dispose;t&&(r[t]=r.delete)};function mt(){}var Mt=(r,t)=>Object.defineProperty(t,"name",{value:r}),sr={},ur=(r,t,e)=>{if(r[t].overloadTable===void 0){var n=r[t];r[t]=function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r[t].overloadTable.hasOwnProperty(i.length)||b(`Function '${e}' called with an invalid number of arguments (${i.length}) - expects one of (${r[t].overloadTable})!`),r[t].overloadTable[i.length].apply(this,i)},r[t].overloadTable=[],r[t].overloadTable[n.argCount]=n}},cr=(r,t,e)=>{u.hasOwnProperty(r)?((e===void 0||u[r].overloadTable!==void 0&&u[r].overloadTable[e]!==void 0)&&b(`Cannot register public name '${r}' twice`),ur(u,r,r),u[r].overloadTable.hasOwnProperty(e)&&b(`Cannot register multiple overloads of a function with the same number of arguments (${e})!`),u[r].overloadTable[e]=t):(u[r]=t,u[r].argCount=e)},le=48,fe=57,he=r=>{r=r.replace(/[^a-zA-Z0-9_]/g,"$");var t=r.charCodeAt(0);return t>=le&&t<=fe?`_${r}`:r};function de(r,t,e,n,a,i,s,o){this.name=r,this.constructor=t,this.instancePrototype=e,this.rawDestructor=n,this.baseClass=a,this.getActualType=i,this.upcast=s,this.downcast=o,this.pureVirtualFunctions=[]}var Lt=(r,t,e)=>{for(;t!==e;)t.upcast||b(`Expected null or instance of ${e.name}, got an instance of ${t.name}`),r=t.upcast(r),t=t.baseClass;return r};function pe(r,t){if(t===null)return this.isReference&&b(`null is not a valid ${this.name}`),0;t.$$||b(`Cannot pass "${embindRepr(t)}" as a ${this.name}`),t.$$.ptr||b(`Cannot pass deleted object as a pointer of type ${this.name}`);var e=t.$$.ptrType.registeredClass,n=Lt(t.$$.ptr,e,this.registeredClass);return n}function ve(r,t){var e;if(t===null)return this.isReference&&b(`null is not a valid ${this.name}`),this.isSmartPointer?(e=this.rawConstructor(),r!==null&&r.push(this.rawDestructor,e),e):0;(!t||!t.$$)&&b(`Cannot pass "${embindRepr(t)}" as a ${this.name}`),t.$$.ptr||b(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&b(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var n=t.$$.ptrType.registeredClass;if(e=Lt(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&b("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?e=t.$$.smartPtr:b(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:e=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)e=t.$$.smartPtr;else{var a=t.clone();e=this.rawShare(e,N.toHandle(()=>a.delete())),r!==null&&r.push(this.rawDestructor,e)}break;default:b("Unsupporting sharing policy")}return e}function ye(r,t){if(t===null)return this.isReference&&b(`null is not a valid ${this.name}`),0;t.$$||b(`Cannot pass "${embindRepr(t)}" as a ${this.name}`),t.$$.ptr||b(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&b(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var e=t.$$.ptrType.registeredClass,n=Lt(t.$$.ptr,e,this.registeredClass);return n}var lr=(r,t,e)=>{if(t===e)return r;if(e.baseClass===void 0)return null;var n=lr(r,t,e.baseClass);return n===null?null:e.downcast(n)},ge={},me=(r,t)=>{for(t===void 0&&b("ptr should not be undefined");r.baseClass;)t=r.upcast(t),r=r.baseClass;return t},$e=(r,t)=>(t=me(r,t),ge[t]),$t=(r,t)=>{(!t.ptrType||!t.ptr)&&gt("makeClassHandle requires ptr and ptrType");var e=!!t.smartPtrType,n=!!t.smartPtr;return e!==n&&gt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},st(Object.create(r,{$$:{value:t,writable:!0}}))};function we(r){var t=this.getPointee(r);if(!t)return this.destructor(r),null;var e=$e(this.registeredClass,t);if(e!==void 0){if(e.$$.count.value===0)return e.$$.ptr=t,e.$$.smartPtr=r,e.clone();var n=e.clone();return this.destructor(r),n}function a(){return this.isSmartPointer?$t(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:r}):$t(this.registeredClass.instancePrototype,{ptrType:this,ptr:r})}var i=this.registeredClass.getActualType(t),s=sr[i];if(!s)return a.call(this);var o;this.isConst?o=s.constPointerType:o=s.pointerType;var c=lr(t,this.registeredClass,o.registeredClass);return c===null?a.call(this):this.isSmartPointer?$t(o.registeredClass.instancePrototype,{ptrType:o,ptr:c,smartPtrType:this,smartPtr:r}):$t(o.registeredClass.instancePrototype,{ptrType:o,ptr:c})}var be=()=>{Object.assign(wt.prototype,{getPointee(r){return this.rawGetPointee&&(r=this.rawGetPointee(r)),r},destructor(r){var t;(t=this.rawDestructor)===null||t===void 0||t.call(this,r)},argPackAdvance:z,readValueFromPointer:it,fromWireType:we})};function wt(r,t,e,n,a,i,s,o,c,l,f){this.name=r,this.registeredClass=t,this.isReference=e,this.isConst=n,this.isSmartPointer=a,this.pointeeType=i,this.sharingPolicy=s,this.rawGetPointee=o,this.rawConstructor=c,this.rawShare=l,this.rawDestructor=f,!a&&t.baseClass===void 0?n?(this.toWireType=pe,this.destructorFunction=null):(this.toWireType=ye,this.destructorFunction=null):this.toWireType=ve}var fr=(r,t,e)=>{u.hasOwnProperty(r)||gt("Replacing nonexistent public symbol"),u[r].overloadTable!==void 0&&e!==void 0?u[r].overloadTable[e]=t:(u[r]=t,u[r].argCount=e)},hr=[],dr,m=r=>{var t=hr[r];return t||(hr[r]=t=dr.get(r)),t},Ce=function(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r.includes("j"))return dynCallLegacy(r,t,e);var n=m(t),a=n(...e);return a},Te=function(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return Ce(r,t,a,e)}},U=function(r,t){r=I(r);function e(){if(r.includes("j"))return Te(r,t);var a=m(t);return a}var n=e();return typeof n!="function"&&b(`unknown function pointer with signature ${r}: ${t}`),n};class Pe extends Error{}var pr=r=>{var t=Sn(r),e=I(t);return J(t),e},bt=(r,t)=>{var e=[],n={};function a(i){if(!n[i]&&!q[i]){if(yt[i]){yt[i].forEach(a);return}e.push(i),n[i]=!0}}throw t.forEach(a),new Pe(`${r}: `+e.map(pr).join([", "]))},Ae=(r,t,e,n,a,i,s,o,c,l,f,p,$)=>{f=I(f),i=U(a,i),o&&(o=U(s,o)),l&&(l=U(c,l)),$=U(p,$);var w=he(f);cr(w,function(){bt(`Cannot construct ${f} due to unbound types`,[n])}),Q([r,t,e],n?[n]:[],P=>{P=P[0];var S,A;n?(S=P.registeredClass,A=S.instancePrototype):A=mt.prototype;var x=Mt(f,function(){if(Object.getPrototypeOf(this)!==G)throw new ot(`Use 'new' to construct ${f}`);if(W.constructor_body===void 0)throw new ot(`${f} has no accessible constructor`);for(var _r=arguments.length,Tt=new Array(_r),Pt=0;Pt<_r;Pt++)Tt[Pt]=arguments[Pt];var Sr=W.constructor_body[Tt.length];if(Sr===void 0)throw new ot(`Tried to invoke ctor of ${f} with invalid number of parameters (${Tt.length}) - expected (${Object.keys(W.constructor_body).toString()}) parameters instead!`);return Sr.apply(this,Tt)}),G=Object.create(A,{constructor:{value:x}});x.prototype=G;var W=new de(f,x,G,$,S,i,o,l);if(W.baseClass){var M,Ct;(Ct=(M=W.baseClass).__derivedClasses)!==null&&Ct!==void 0||(M.__derivedClasses=[]),W.baseClass.__derivedClasses.push(W)}var $a=new wt(f,W,!0,!1,!1),Pr=new wt(f+"*",W,!1,!1,!1),Ar=new wt(f+" const*",W,!1,!0,!1);return sr[r]={pointerType:Pr,constPointerType:Ar},fr(w,x),[$a,Pr,Ar]})},Ut=(r,t)=>{for(var e=[],n=0;n<r;n++)e.push(C[t+n*4>>2]);return e};function _e(r){for(var t=1;t<r.length;++t)if(r[t]!==null&&r[t].destructorFunction===void 0)return!0;return!1}function kt(r,t,e,n,a,i){var s=t.length;s<2&&b("argTypes array size mismatch! Must at least get return value and 'this' types!");var o=t[1]!==null&&e!==null,c=_e(t),l=t[0].name!=="void",f=s-2,p=new Array(f),$=[],w=[],P=function(){w.length=0;var S;$.length=o?2:1,$[0]=a,o&&(S=t[1].toWireType(w,this),$[1]=S);for(var A=0;A<f;++A)p[A]=t[A+2].toWireType(w,A<0||arguments.length<=A?void 0:arguments[A]),$.push(p[A]);var x=n(...$);function G(W){if(c)jt(w);else for(var M=o?1:2;M<t.length;M++){var Ct=M===1?S:p[M-2];t[M].destructorFunction!==null&&t[M].destructorFunction(Ct)}if(l)return t[0].fromWireType(W)}return G(x)};return Mt(r,P)}var Se=(r,t,e,n,a,i)=>{var s=Ut(t,e);a=U(n,a),Q([],[r],o=>{o=o[0];var c=`constructor ${o.name}`;if(o.registeredClass.constructor_body===void 0&&(o.registeredClass.constructor_body=[]),o.registeredClass.constructor_body[t-1]!==void 0)throw new ot(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${o.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return o.registeredClass.constructor_body[t-1]=()=>{bt(`Cannot construct ${o.name} due to unbound types`,s)},Q([],s,l=>(l.splice(1,0,null),o.registeredClass.constructor_body[t-1]=kt(c,l,null,a,i),[])),[]})},vr=r=>{r=r.trim();const t=r.indexOf("(");return t===-1?r:r.slice(0,t)},Oe=(r,t,e,n,a,i,s,o,c,l)=>{var f=Ut(e,n);t=I(t),t=vr(t),i=U(a,i),Q([],[r],p=>{p=p[0];var $=`${p.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),o&&p.registeredClass.pureVirtualFunctions.push(t);function w(){bt(`Cannot call ${$} due to unbound types`,f)}var P=p.registeredClass.instancePrototype,S=P[t];return S===void 0||S.overloadTable===void 0&&S.className!==p.name&&S.argCount===e-2?(w.argCount=e-2,w.className=p.name,P[t]=w):(ur(P,t,$),P[t].overloadTable[e-2]=w),Q([],f,A=>{var x=kt($,A,p,i,s);return P[t].overloadTable===void 0?(x.argCount=e-2,P[t]=x):P[t].overloadTable[e-2]=x,[]}),[]})},Bt=[],V=[],Ht=r=>{r>9&&--V[r+1]===0&&(V[r]=void 0,Bt.push(r))},xe=()=>V.length/2-5-Bt.length,Ee=()=>{V.push(0,1,void 0,1,null,1,!0,1,!1,1),u.count_emval_handles=xe},N={toValue:r=>(r||b(`Cannot use deleted val. handle = ${r}`),V[r]),toHandle:r=>{switch(r){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const t=Bt.pop()||V.length;return V[t]=r,V[t+1]=1,t}}}},yr={name:"emscripten::val",fromWireType:r=>{var t=N.toValue(r);return Ht(r),t},toWireType:(r,t)=>N.toHandle(t),argPackAdvance:z,readValueFromPointer:it,destructorFunction:null},Fe=r=>B(r,yr),Ie=(r,t)=>{switch(t){case 4:return function(e){return this.fromWireType(Yt[e>>2])};case 8:return function(e){return this.fromWireType(Kt[e>>3])};default:throw new TypeError(`invalid float width (${t}): ${r}`)}},We=(r,t,e)=>{t=I(t),B(r,{name:t,fromWireType:n=>n,toWireType:(n,a)=>a,argPackAdvance:z,readValueFromPointer:Ie(t,e),destructorFunction:null})},je=(r,t,e,n,a,i,s,o)=>{var c=Ut(t,e);r=I(r),r=vr(r),a=U(n,a),cr(r,function(){bt(`Cannot call ${r} due to unbound types`,c)},t-1),Q([],c,l=>{var f=[l[0],null].concat(l.slice(1));return fr(r,kt(r,f,null,a,i),t-1),[]})},Re=(r,t,e)=>{switch(t){case 1:return e?n=>X[n]:n=>D[n];case 2:return e?n=>nt[n>>1]:n=>lt[n>>1];case 4:return e?n=>K[n>>2]:n=>C[n>>2];default:throw new TypeError(`invalid integer width (${t}): ${r}`)}},De=(r,t,e,n,a)=>{t=I(t);var i=f=>f;if(n===0){var s=32-8*e;i=f=>f<<s>>>s}var o=t.includes("unsigned"),c=(f,p)=>{},l;o?l=function(f,p){return c(p,this.name),p>>>0}:l=function(f,p){return c(p,this.name),p},B(r,{name:t,fromWireType:i,toWireType:l,argPackAdvance:z,readValueFromPointer:Re(t,e,n!==0),destructorFunction:null})},Me=(r,t,e)=>{var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],a=n[t];function i(s){var o=C[s>>2],c=C[s+4>>2];return new a(X.buffer,c,o)}e=I(e),B(r,{name:e,fromWireType:i,argPackAdvance:z,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},Le=Object.assign({optional:!0},yr),Ue=(r,t)=>{B(r,Le)},ke=(r,t,e,n)=>{if(!(n>0))return 0;for(var a=e,i=e+n-1,s=0;s<r.length;++s){var o=r.charCodeAt(s);if(o>=55296&&o<=57343){var c=r.charCodeAt(++s);o=65536+((o&1023)<<10)|c&1023}if(o<=127){if(e>=i)break;t[e++]=o}else if(o<=2047){if(e+1>=i)break;t[e++]=192|o>>6,t[e++]=128|o&63}else if(o<=65535){if(e+2>=i)break;t[e++]=224|o>>12,t[e++]=128|o>>6&63,t[e++]=128|o&63}else{if(e+3>=i)break;t[e++]=240|o>>18,t[e++]=128|o>>12&63,t[e++]=128|o>>6&63,t[e++]=128|o&63}}return t[e]=0,e-a},rt=(r,t,e)=>ke(r,D,t,e),gr=r=>{for(var t=0,e=0;e<r.length;++e){var n=r.charCodeAt(e);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++e):t+=3}return t},mr=typeof TextDecoder<"u"?new TextDecoder:void 0,$r=function(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;for(var n=t+e,a=t;r[a]&&!(a>=n);)++a;if(a-t>16&&r.buffer&&mr)return mr.decode(r.subarray(t,a));for(var i="";t<a;){var s=r[t++];if(!(s&128)){i+=String.fromCharCode(s);continue}var o=r[t++]&63;if((s&224)==192){i+=String.fromCharCode((s&31)<<6|o);continue}var c=r[t++]&63;if((s&240)==224?s=(s&15)<<12|o<<6|c:s=(s&7)<<18|o<<12|c<<6|r[t++]&63,s<65536)i+=String.fromCharCode(s);else{var l=s-65536;i+=String.fromCharCode(55296|l>>10,56320|l&1023)}}return i},Be=(r,t)=>r?$r(D,r,t):"",He=(r,t)=>{t=I(t),B(r,{name:t,fromWireType(e){for(var n=C[e>>2],a=e+4,i,o,s=a,o=0;o<=n;++o){var c=a+o;if(o==n||D[c]==0){var l=c-s,f=Be(s,l);i===void 0?i=f:(i+="\0",i+=f),s=c+1}}return J(e),i},toWireType(e,n){n instanceof ArrayBuffer&&(n=new Uint8Array(n));var a,i=typeof n=="string";i||ArrayBuffer.isView(n)&&n.BYTES_PER_ELEMENT==1||b("Cannot pass non-string to std::string"),i?a=gr(n):a=n.length;var s=Tr(4+a+1),o=s+4;return C[s>>2]=a,i?rt(n,o,a+1):D.set(n,o),e!==null&&e.push(J,s),s},argPackAdvance:z,readValueFromPointer:it,destructorFunction(e){J(e)}})},wr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,ze=(r,t)=>{for(var e=r,n=e>>1,a=n+t/2;!(n>=a)&&lt[n];)++n;if(e=n<<1,e-r>32&&wr)return wr.decode(D.subarray(r,e));for(var i="",s=0;!(s>=t/2);++s){var o=nt[r+s*2>>1];if(o==0)break;i+=String.fromCharCode(o)}return i},Ve=(r,t,e)=>{if(e!=null||(e=2147483647),e<2)return 0;e-=2;for(var n=t,a=e<r.length*2?e/2:r.length,i=0;i<a;++i){var s=r.charCodeAt(i);nt[t>>1]=s,t+=2}return nt[t>>1]=0,t-n},Ne=r=>r.length*2,Ge=(r,t)=>{for(var e=0,n="";!(e>=t/4);){var a=K[r+e*4>>2];if(a==0)break;if(++e,a>=65536){var i=a-65536;n+=String.fromCharCode(55296|i>>10,56320|i&1023)}else n+=String.fromCharCode(a)}return n},Xe=(r,t,e)=>{if(e!=null||(e=2147483647),e<4)return 0;for(var n=t,a=n+e-4,i=0;i<r.length;++i){var s=r.charCodeAt(i);if(s>=55296&&s<=57343){var o=r.charCodeAt(++i);s=65536+((s&1023)<<10)|o&1023}if(K[t>>2]=s,t+=4,t+4>a)break}return K[t>>2]=0,t-n},Ze=r=>{for(var t=0,e=0;e<r.length;++e){var n=r.charCodeAt(e);n>=55296&&n<=57343&&++e,t+=4}return t},qe=(r,t,e)=>{e=I(e);var n,a,i,s;t===2?(n=ze,a=Ve,s=Ne,i=o=>lt[o>>1]):t===4&&(n=Ge,a=Xe,s=Ze,i=o=>C[o>>2]),B(r,{name:e,fromWireType:o=>{for(var c=C[o>>2],l,f=o+4,p=0;p<=c;++p){var $=o+4+p*t;if(p==c||i($)==0){var w=$-f,P=n(f,w);l===void 0?l=P:(l+="\0",l+=P),f=$+t}}return J(o),l},toWireType:(o,c)=>{typeof c!="string"&&b(`Cannot pass non-string to C++ string type ${e}`);var l=s(c),f=Tr(4+l+t);return C[f>>2]=l/t,a(c,f+4,l+t),o!==null&&o.push(J,f),f},argPackAdvance:z,readValueFromPointer:it,destructorFunction(o){J(o)}})},Qe=(r,t,e,n,a,i)=>{vt[r]={name:I(t),rawConstructor:U(e,n),rawDestructor:U(a,i),fields:[]}},Je=(r,t,e,n,a,i,s,o,c,l)=>{vt[r].fields.push({fieldName:I(t),getterReturnType:e,getter:U(n,a),getterContext:i,setterArgumentType:s,setter:U(o,c),setterContext:l})},Ye=(r,t)=>{t=I(t),B(r,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(e,n)=>{}})},zt=[],Ke=(r,t,e,n)=>(r=zt[r],t=N.toValue(t),r(null,t,e,n)),tn={},rn=r=>{var t=tn[r];return t===void 0?I(r):t},br=()=>{if(typeof globalThis=="object")return globalThis;function r(t){t.$$$embind_global$$$=t;var e=typeof $$$embind_global$$$=="object"&&t.$$$embind_global$$$==t;return e||delete t.$$$embind_global$$$,e}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&r(global)?$$$embind_global$$$=global:typeof self=="object"&&r(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},en=r=>r===0?N.toHandle(br()):(r=rn(r),N.toHandle(br()[r])),nn=r=>{var t=zt.length;return zt.push(r),t},Cr=(r,t)=>{var e=q[r];return e===void 0&&b(`${t} has unknown type ${pr(r)}`),e},an=(r,t)=>{for(var e=new Array(r),n=0;n<r;++n)e[n]=Cr(C[t+n*4>>2],`parameter ${n}`);return e},on=(r,t,e)=>{var n=[],a=r.toWireType(n,e);return n.length&&(C[t>>2]=N.toHandle(n)),a},sn=Reflect.construct,un=(r,t,e)=>{var n=an(r,t),a=n.shift();r--;var i=new Array(r),s=(c,l,f,p)=>{for(var $=0,w=0;w<r;++w)i[w]=n[w].readValueFromPointer(p+$),$+=n[w].argPackAdvance;var P=e===1?sn(l,i):l.apply(c,i);return on(a,f,P)},o=`methodCaller<(${n.map(c=>c.name).join(", ")}) => ${a.name}>`;return nn(Mt(o,s))},cn=r=>{r>9&&(V[r+1]+=1)},ln=r=>{var t=N.toValue(r);jt(t),Ht(r)},fn=(r,t)=>{r=Cr(r,"_emval_take_value");var e=r.readValueFromPointer(t);return N.toHandle(e)},hn=(r,t,e,n)=>{var a=new Date().getFullYear(),i=new Date(a,0,1),s=new Date(a,6,1),o=i.getTimezoneOffset(),c=s.getTimezoneOffset(),l=Math.max(o,c);C[r>>2]=l*60,K[t>>2]=+(o!=c);var f=w=>{var P=w>=0?"-":"+",S=Math.abs(w),A=String(Math.floor(S/60)).padStart(2,"0"),x=String(S%60).padStart(2,"0");return`UTC${P}${A}${x}`},p=f(o),$=f(c);c<o?(rt(p,e,17),rt($,n,17)):(rt(p,n,17),rt($,e,17))},dn=()=>2147483648,pn=(r,t)=>Math.ceil(r/t)*t,vn=r=>{var t=ct.buffer,e=(r-t.byteLength+65535)/65536|0;try{return ct.grow(e),tr(),1}catch{}},yn=r=>{var t=D.length;r>>>=0;var e=dn();if(r>e)return!1;for(var n=1;n<=4;n*=2){var a=t*(1+.2/n);a=Math.min(a,r+100663296);var i=Math.min(e,pn(Math.max(r,a),65536)),s=vn(i);if(s)return!0}return!1},Vt={},gn=()=>R||"./this.program",ut=()=>{if(!ut.strings){var r=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:r,_:gn()};for(var e in Vt)Vt[e]===void 0?delete t[e]:t[e]=Vt[e];var n=[];for(var e in t)n.push(`${e}=${t[e]}`);ut.strings=n}return ut.strings},mn=(r,t)=>{var e=0,n=0;for(var a of ut()){var i=t+e;C[r+n>>2]=i,e+=rt(a,i,1/0)+1,n+=4}return 0},$n=(r,t)=>{var e=ut();C[r>>2]=e.length;var n=0;for(var a of e)n+=gr(a)+1;return C[t>>2]=n,0},wn=r=>52;function bn(r,t,e,n,a){return 70}var Cn=[null,[],[]],Tn=(r,t)=>{var e=Cn[r];t===0||t===10?((r===1?Qt:Y)($r(e)),e.length=0):e.push(t)},Pn=(r,t,e,n)=>{for(var a=0,i=0;i<e;i++){var s=C[t>>2],o=C[t+4>>2];t+=8;for(var c=0;c<o;c++)Tn(r,D[s+c]);a+=o}return C[n>>2]=a,0},An=r=>r;ae(),ce(),be(),Ee(),u.noExitRuntime&&u.noExitRuntime,u.print&&(Qt=u.print),u.printErr&&(Y=u.printErr),u.wasmBinary&&(et=u.wasmBinary),u.arguments&&u.arguments,u.thisProgram&&(R=u.thisProgram);var _n={s:Nr,w:Gr,a:Xr,j:Zr,m:qr,N:Qr,p:Jr,da:Yr,d:Kr,_:te,sa:ee,Z:ne,na:oe,qa:Ae,pa:Se,F:Oe,la:Fe,R:We,S:je,y:De,t:Me,ra:Ue,ma:He,O:qe,K:Qe,ta:Je,oa:Ye,V:Ke,ua:Ht,wa:en,$:un,T:cn,va:ln,ka:fn,aa:hn,ea:yn,ba:mn,ca:$n,fa:wn,X:bn,Q:Pn,I:aa,C:oa,U:Hn,P:da,q:ta,b:Ln,D:na,ia:ua,c:kn,ha:ca,h:Bn,i:Xn,r:qn,M:ea,v:Jn,E:Kn,J:ra,A:sa,H:pa,W:ga,k:Vn,f:zn,e:Un,g:Mn,L:ha,l:Gn,ja:ia,o:Qn,x:Zn,u:Yn,ga:fa,B:la,n:Nn,G:va,Y:ya,z:An},T=await Hr();T.ya;var Sn=T.za,J=u._free=T.Aa,Tr=u._malloc=T.Ca,On=T.Da,v=T.Ea,xn=T.Fa,En=T.Ga,Fn=T.Ha,In=T.Ia,Wn=T.Ja,jn=T.Ka;u.dynCall_viijii=T.La;var Rn=u.dynCall_vij=T.Ma;u.dynCall_jiji=T.Na;var Dn=u.dynCall_jiiii=T.Oa;u.dynCall_iiiiij=T.Pa,u.dynCall_iiiiijj=T.Qa,u.dynCall_iiiiiijj=T.Ra;function Mn(r,t,e,n){var a=g();try{m(r)(t,e,n)}catch(i){if(y(a),i!==i+0)throw i;v(1,0)}}function Ln(r,t){var e=g();try{return m(r)(t)}catch(n){if(y(e),n!==n+0)throw n;v(1,0)}}function Un(r,t,e){var n=g();try{m(r)(t,e)}catch(a){if(y(n),a!==a+0)throw a;v(1,0)}}function kn(r,t,e){var n=g();try{return m(r)(t,e)}catch(a){if(y(n),a!==a+0)throw a;v(1,0)}}function Bn(r,t,e,n){var a=g();try{return m(r)(t,e,n)}catch(i){if(y(a),i!==i+0)throw i;v(1,0)}}function Hn(r,t,e,n,a){var i=g();try{return m(r)(t,e,n,a)}catch(s){if(y(i),s!==s+0)throw s;v(1,0)}}function zn(r,t){var e=g();try{m(r)(t)}catch(n){if(y(e),n!==n+0)throw n;v(1,0)}}function Vn(r){var t=g();try{m(r)()}catch(e){if(y(t),e!==e+0)throw e;v(1,0)}}function Nn(r,t,e,n,a,i,s,o,c,l,f){var p=g();try{m(r)(t,e,n,a,i,s,o,c,l,f)}catch($){if(y(p),$!==$+0)throw $;v(1,0)}}function Gn(r,t,e,n,a){var i=g();try{m(r)(t,e,n,a)}catch(s){if(y(i),s!==s+0)throw s;v(1,0)}}function Xn(r,t,e,n,a){var i=g();try{return m(r)(t,e,n,a)}catch(s){if(y(i),s!==s+0)throw s;v(1,0)}}function Zn(r,t,e,n,a,i,s){var o=g();try{m(r)(t,e,n,a,i,s)}catch(c){if(y(o),c!==c+0)throw c;v(1,0)}}function qn(r,t,e,n,a,i){var s=g();try{return m(r)(t,e,n,a,i)}catch(o){if(y(s),o!==o+0)throw o;v(1,0)}}function Qn(r,t,e,n,a,i){var s=g();try{m(r)(t,e,n,a,i)}catch(o){if(y(s),o!==o+0)throw o;v(1,0)}}function Jn(r,t,e,n,a,i,s){var o=g();try{return m(r)(t,e,n,a,i,s)}catch(c){if(y(o),c!==c+0)throw c;v(1,0)}}function Yn(r,t,e,n,a,i,s,o){var c=g();try{m(r)(t,e,n,a,i,s,o)}catch(l){if(y(c),l!==l+0)throw l;v(1,0)}}function Kn(r,t,e,n,a,i,s,o){var c=g();try{return m(r)(t,e,n,a,i,s,o)}catch(l){if(y(c),l!==l+0)throw l;v(1,0)}}function ta(r){var t=g();try{return m(r)()}catch(e){if(y(t),e!==e+0)throw e;v(1,0)}}function ra(r,t,e,n,a,i,s,o,c){var l=g();try{return m(r)(t,e,n,a,i,s,o,c)}catch(f){if(y(l),f!==f+0)throw f;v(1,0)}}function ea(r,t,e,n,a,i,s){var o=g();try{return m(r)(t,e,n,a,i,s)}catch(c){if(y(o),c!==c+0)throw c;v(1,0)}}function na(r,t,e,n){var a=g();try{return m(r)(t,e,n)}catch(i){if(y(a),i!==i+0)throw i;v(1,0)}}function aa(r,t,e,n){var a=g();try{return m(r)(t,e,n)}catch(i){if(y(a),i!==i+0)throw i;v(1,0)}}function ia(r,t,e,n,a,i,s,o){var c=g();try{m(r)(t,e,n,a,i,s,o)}catch(l){if(y(c),l!==l+0)throw l;v(1,0)}}function oa(r,t,e,n,a,i){var s=g();try{return m(r)(t,e,n,a,i)}catch(o){if(y(s),o!==o+0)throw o;v(1,0)}}function sa(r,t,e,n,a,i,s,o,c,l){var f=g();try{return m(r)(t,e,n,a,i,s,o,c,l)}catch(p){if(y(f),p!==p+0)throw p;v(1,0)}}function ua(r,t,e){var n=g();try{return m(r)(t,e)}catch(a){if(y(n),a!==a+0)throw a;v(1,0)}}function ca(r,t,e,n,a){var i=g();try{return m(r)(t,e,n,a)}catch(s){if(y(i),s!==s+0)throw s;v(1,0)}}function la(r,t,e,n,a,i,s,o,c,l){var f=g();try{m(r)(t,e,n,a,i,s,o,c,l)}catch(p){if(y(f),p!==p+0)throw p;v(1,0)}}function fa(r,t,e,n,a,i,s,o,c){var l=g();try{m(r)(t,e,n,a,i,s,o,c)}catch(f){if(y(l),f!==f+0)throw f;v(1,0)}}function ha(r,t,e,n,a,i,s){var o=g();try{m(r)(t,e,n,a,i,s)}catch(c){if(y(o),c!==c+0)throw c;v(1,0)}}function da(r,t,e,n){var a=g();try{return m(r)(t,e,n)}catch(i){if(y(a),i!==i+0)throw i;v(1,0)}}function pa(r,t,e,n,a,i,s,o,c,l,f,p){var $=g();try{return m(r)(t,e,n,a,i,s,o,c,l,f,p)}catch(w){if(y($),w!==w+0)throw w;v(1,0)}}function va(r,t,e,n,a,i,s,o,c,l,f,p,$,w,P,S){var A=g();try{m(r)(t,e,n,a,i,s,o,c,l,f,p,$,w,P,S)}catch(x){if(y(A),x!==x+0)throw x;v(1,0)}}function ya(r,t,e,n){var a=g();try{Rn(r,t,e,n)}catch(i){if(y(a),i!==i+0)throw i;v(1,0)}}function ga(r,t,e,n,a){var i=g();try{return Dn(r,t,e,n,a)}catch(s){if(y(i),s!==s+0)throw s;v(1,0)}}function Nt(){if(Z>0){at=Nt;return}if(Fr(),Z>0){at=Nt;return}function r(){var t;u.calledRun=!0,!Jt&&(Ir(),j(u),(t=u.onRuntimeInitialized)===null||t===void 0||t.call(u),Wr())}u.setStatus?(u.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>u.setStatus(""),1),r()},1)):r()}function ma(){if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.shift()()}return ma(),Nt(),h=E,h};async function Ba(d,h){return Ua(ka,d,h)}const Er={tryHarder:!0,formats:["QRCode","PDF417"],maxNumberOfSymbols:1};class Va{constructor(){Gt(this,"name","ZXing-WASM");Gt(this,"readFn",null)}async init(){At.info("ZXingWasmProvider","Initializing ZXing-WASM provider");try{this.readFn=Ba,At.debug("ZXingWasmProvider","WASM module loaded")}catch(h){throw At.error("ZXingWasmProvider","Failed to load zxing-wasm",h),h}}async scanVideoFrame(h,u){if(!this.readFn)throw new Error("ZXing-WASM not initialised");if(!h.videoWidth||!h.videoHeight)return null;const j=u.getContext("2d");if(!j)throw new Error("Cannot get canvas context");u.width=h.videoWidth,u.height=h.videoHeight,j.drawImage(h,0,0);const O=j.getImageData(0,0,u.width,u.height);try{const E=await this.readFn(O,Er);return(E==null?void 0:E.text)||null}catch{return null}}async scanImage(h){var E;if(!this.readFn)throw new Error("ZXing-WASM not initialised");let u;if(h instanceof HTMLCanvasElement)u=h;else{u=document.createElement("canvas"),u.width=h.naturalWidth||h.width,u.height=h.naturalHeight||h.height;const F=u.getContext("2d");if(!F)throw new Error("Cannot get canvas context");F.drawImage(h,0,0)}const O=u.getContext("2d").getImageData(0,0,u.width,u.height);try{return((E=(await this.readFn(O,Er))[0])==null?void 0:E.text)||null}catch{return null}}destroy(){At.debug("ZXingWasmProvider","Destroying decoder"),this.readFn=null}}export{Va as ZXingWasmProvider};
