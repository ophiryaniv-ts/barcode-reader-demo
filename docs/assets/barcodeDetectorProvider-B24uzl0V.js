var i=Object.defineProperty;var n=(d,e,r)=>e in d?i(d,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):d[e]=r;var c=(d,e,r)=>n(d,typeof e!="symbol"?e+"":e,r);import{l as t}from"./index-JZAwjNll.js";class u{constructor(){c(this,"name","BarcodeDetector");c(this,"detector",null)}async init(){if(t.info("BarcodeDetectorProvider","Initializing BarcodeDetector provider"),!("BarcodeDetector"in window))throw new Error("BarcodeDetector API not supported in this browser");try{this.detector=new window.BarcodeDetector({formats:["qr_code","pdf417","code_128","code_39","ean_13","ean_8"]}),t.debug("BarcodeDetectorProvider","Native BarcodeDetector created")}catch(e){throw t.error("BarcodeDetectorProvider","Failed to initialize BarcodeDetector",e),e}}async scanVideoFrame(e,r){if(!this.detector)throw new Error("BarcodeDetector provider not initialized");if(!e.videoWidth||!e.videoHeight)return null;try{const o=await this.detector.detect(e);return o.length>0?(t.debug("BarcodeDetectorProvider",`Found ${o.length} barcode(s)`,{formats:o.map(a=>a.format)}),o[0].rawValue):null}catch(o){return t.debug("BarcodeDetectorProvider","No barcode found in video frame",o),null}}async scanImage(e){if(!this.detector)throw new Error("BarcodeDetector provider not initialized");try{const r=await this.detector.detect(e);return r.length>0?(t.debug("BarcodeDetectorProvider",`Found ${r.length} barcode(s)`,{formats:r.map(o=>o.format)}),t.debug("BarcodeDetectorProvider",`Barcode: ${r[0].rawValue}`),r[0].rawValue):null}catch(r){return t.debug("BarcodeDetectorProvider","No barcode found in image",r),null}}destroy(){t.debug("BarcodeDetectorProvider","Destroying BarcodeDetector provider"),this.detector=null}}export{u as BarcodeDetectorProvider};
