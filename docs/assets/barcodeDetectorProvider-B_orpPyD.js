var a=Object.defineProperty;var i=(o,r,e)=>r in o?a(o,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[r]=e;var c=(o,r,e)=>i(o,typeof r!="symbol"?r+"":r,e);import{l as t}from"./index-EJyi4cmf.js";class u{constructor(){c(this,"name","BarcodeDetector");c(this,"detector",null)}async init(){if(t.info("BarcodeDetectorProvider","Initializing BarcodeDetector provider"),!("BarcodeDetector"in window))throw new Error("BarcodeDetector API not supported in this browser");try{this.detector=new window.BarcodeDetector({formats:["qr_code","pdf417","code_128","code_39","ean_13","ean_8"]}),t.debug("BarcodeDetectorProvider","Native BarcodeDetector created")}catch(r){throw t.error("BarcodeDetectorProvider","Failed to initialize BarcodeDetector",r),r}}async scanVideoFrame(r){if(!this.detector)throw new Error("BarcodeDetector provider not initialized");if(!r.videoWidth||!r.videoHeight)return null;try{const e=await this.detector.detect(r);return e.length>0?(t.debug("BarcodeDetectorProvider",`Found ${e.length} barcode(s)`,{formats:e.map(d=>d.format)}),e[0].rawValue):null}catch(e){return t.debug("BarcodeDetectorProvider","No barcode found in video frame",e),null}}async scanImage(r){if(!this.detector)throw new Error("BarcodeDetector provider not initialized");try{const e=await this.detector.detect(r);return e.length>0?(t.debug("BarcodeDetectorProvider",`Found ${e.length} barcode(s)`,{formats:e.map(d=>d.format)}),t.debug("BarcodeDetectorProvider",`Barcode: ${e[0].rawValue}`),e[0].rawValue):null}catch(e){return t.debug("BarcodeDetectorProvider","No barcode found in image",e),null}}destroy(){t.debug("BarcodeDetectorProvider","Destroying BarcodeDetector provider"),this.detector=null}}export{u as BarcodeDetectorProvider};
